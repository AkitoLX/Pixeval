<controls1:EnhancedPage x:Class="Pixeval.Pages.IllustrationViewer.IllustrationViewerPage"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
                        xmlns:controls1="using:Pixeval.Controls"
                        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                        xmlns:ui="using:Pixeval.Util.UI"
                        ui:NavigationHelper.BackHotKey="Escape"
                        Loaded="IllustrationViewerPage_OnLoaded"
                        mc:Ignorable="d">
    <controls1:EnhancedPage.Resources>
        <ThemeShadow x:Name="PopupShadow" />
        <ThemeShadow x:Name="SidePanelShadow" />
    </controls1:EnhancedPage.Resources>
    <SplitView x:Name="IllustrationInfoAndCommentsSplitView"
               DisplayMode="Overlay"
               IsPaneOpen="{x:Bind _viewModel.IsInfoPaneOpen, Mode=TwoWay}"
               OpenPaneLength="330"
               PaneBackground="Transparent"
               PaneClosed="IllustrationInfoAndCommentsSplitView_OnPaneClosed"
               PaneOpened="IllustrationInfoAndCommentsSplitView_OnPaneOpened">
        <SplitView.Pane>
            <Grid Width="330"
                  HorizontalAlignment="Left"
                  Background="Transparent">
                <Grid Width="320"
                      HorizontalAlignment="Left"
                      Background="{StaticResource SystemControlBackgroundChromeMediumLowBrush}"
                      Shadow="{x:Bind SidePanelShadow}"
                      Translation="0,0,40">
                    <NavigationView IsBackButtonVisible="Collapsed"
                                    IsSettingsVisible="False"
                                    PaneDisplayMode="Top"
                                    SelectionChanged="IllustrationInfoAndCommentsNavigationView_OnSelectionChanged">
                        <NavigationView.MenuItems>
                            <NavigationViewItem x:Uid="/IllustrationViewerPage/IllustrationInfoTab"
                                                IsSelected="True"
                                                Tag="{x:Bind _illustrationInfoTag}" />
                            <NavigationViewItem x:Uid="/IllustrationViewerPage/CommentsTab" Tag="{x:Bind _commentsTag}" />
                            <NavigationViewItem x:Uid="/IllustrationViewerPage/RelatedWorksTab" Tag="{x:Bind _relatedWorksTag}" />
                        </NavigationView.MenuItems>
                        <Frame x:Name="IllustrationInfoAndCommentsFrame" Width="320" />
                    </NavigationView>
                </Grid>
            </Grid>
        </SplitView.Pane>
        <controls:DockPanel x:Name="IllustrationPresenterDockPanel"
                            HorizontalAlignment="Stretch"
                            LastChildFill="True">
            <Grid controls:DockPanel.Dock="Top">
                <Image Width="25"
                       Height="25"
                       Margin="15,0,0,0"
                       HorizontalAlignment="Left"
                       Source="/Assets/Images/logo44x44.ico" />
                <!--  ReSharper disable once Xaml.PossibleNullReferenceException  -->
                <TextBlock Margin="50,-1,0,0"
                           VerticalAlignment="Center"
                           FontSize="{StaticResource PixevalContentFontSize}"
                           Text="{x:Bind _viewModel.IllustrationViewModelInTheGridView.Illustration.Title, Mode=OneWay}" />
                <CommandBar x:Name="IllustrationViewerCommandBar"
                            Width="300"
                            Margin="0,0,20,0"
                            HorizontalAlignment="Center"
                            DefaultLabelPosition="Collapsed">
                    <AppBarToggleButton x:Uid="/IllustrationViewerPage/IllustrationInfoAndCommentsButton"
                                        Width="40"
                                        Icon="{ui:FontIcon Glyph=InfoE946}"
                                        IsChecked="{x:Bind _viewModel.IsInfoPaneOpen, Mode=TwoWay}">
                        <AppBarToggleButton.KeyboardAccelerators>
                            <KeyboardAccelerator Key="F12" />
                        </AppBarToggleButton.KeyboardAccelerators>
                    </AppBarToggleButton>
                    <AppBarButton Width="40"
                                  Command="{x:Bind _viewModel.PlayGifCommand}"
                                  Visibility="{x:Bind _viewModel.IsUgoira}" />
                    <AppBarSeparator />
                    <AppBarButton x:Uid="/IllustrationViewerPage/CopyButton"
                                  Width="40"
                                  Command="{x:Bind _viewModel.CopyCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/SaveButton"
                                  Width="40"
                                  Command="{x:Bind _viewModel.SaveCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/SaveAsButton"
                                  Width="40"
                                  Command="{x:Bind _viewModel.SaveAsCommand}" />
                    <AppBarSeparator />
                    <AppBarButton x:Uid="/IllustrationViewerPage/SetAsButton"
                                  Width="40"
                                  Icon="{ui:FontIcon Glyph=PersonalizeE771}">
                        <AppBarButton.Flyout>
                            <MenuFlyout>
                                <MenuFlyoutItem Command="{x:Bind _viewModel.SetAsBackgroundCommand}" />
                                <MenuFlyoutItem Command="{x:Bind _viewModel.SetAsLockScreenCommand}" />
                            </MenuFlyout>
                        </AppBarButton.Flyout>
                    </AppBarButton>
                    <AppBarSeparator />
                    <AppBarButton x:Uid="/IllustrationViewerPage/AddToBookmarkButton" Command="{x:Bind _viewModel.AddToBookmarkCommand}" />
                    <AppBarButton x:Name="GenerateLinkToThisPageButton"
                                  x:Uid="/IllustrationViewerPage/GenerateLinkToThisPageButton"
                                  Command="{x:Bind _viewModel.GenerateLinkCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/GenerateWebLinkButton" Command="{x:Bind _viewModel.GenerateWebLinkCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/OpenInWebBrowserButton" Command="{x:Bind _viewModel.OpenInWebBrowserCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/ShowQrCodeButton" Command="{x:Bind _viewModel.ShowQrCodeCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/ShareButton" Command="{x:Bind _viewModel.ShareCommand}" />
                </CommandBar>
                <StackPanel Margin="0,0,150,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Orientation="Horizontal">
                    <CommandBar x:Name="IllustrationViewerSubCommandBar"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                DefaultLabelPosition="Collapsed">
                        <AppBarButton x:Uid="/IllustrationViewerPage/FullScreenButton"
                                      Width="40"
                                      Command="{x:Bind _viewModel.FullScreenCommand}" />
                        <AppBarButton x:Name="RestoreResolutionButton"
                                      Width="40"
                                      Command="{x:Bind _viewModel.RestoreResolutionCommand}" />
                        <AppBarButton x:Uid="/IllustrationViewerPage/ZoomOutButton"
                                      Width="40"
                                      Command="{x:Bind _viewModel.ZoomOutCommand}" />
                        <AppBarButton x:Uid="/IllustrationViewerPage/ZoomInButton"
                                      Width="40"
                                      Command="{x:Bind _viewModel.ZoomInCommand}" />
                    </CommandBar>
                    <TextBlock x:Name="CurrentScalePercentage"
                               Margin="-5,-3,0,0"
                               VerticalAlignment="Center"
                               FontSize="{StaticResource PixevalContentFontSize}"
                               FontWeight="SemiBold" />
                </StackPanel>
            </Grid>

            <TeachingTip x:Uid="/IllustrationViewerPage/GenerateLinkToThisPageButtonTeachingTip"
                         ActionButtonClick="GenerateLinkToThisPageButtonTeachingTip_OnActionButtonClick"
                         IsOpen="{x:Bind _viewModel.IsGenerateLinkTeachingTipOpen, Mode=OneWay}"
                         Target="{x:Bind GenerateLinkToThisPageButton}">
                <TeachingTip.HeroContent>
                    <Image Source="../../Assets/Images/illust-app-link-sample.png" />
                </TeachingTip.HeroContent>
            </TeachingTip>
            <Grid Width="50" controls:DockPanel.Dock="Left">
                <AppBarButton Width="40"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Icon="{ui:FontIcon Glyph=ChevronLeft20F743}"
                              LabelPosition="Collapsed"
                              Tapped="PrevImageAppBarButton_OnTapped"
                              Visibility="{x:Bind _viewModel.CalculatePrevImageButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
                <AppBarButton Width="40"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Icon="{ui:FontIcon Glyph=ChevronLeft20F743}"
                              LabelPosition="Collapsed"
                              Tapped="PrevIllustrationAppBarButton_OnTapped"
                              Visibility="{x:Bind _viewModel.CalculatePrevIllustrationButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
            </Grid>
            <Grid Width="50" controls:DockPanel.Dock="Right">
                <AppBarButton Width="40"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Icon="{ui:FontIcon Glyph=ChevronRight20F745}"
                              LabelPosition="Collapsed"
                              Tapped="NextImageAppBarButton_OnTapped"
                              Visibility="{x:Bind _viewModel.CalculateNextImageButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
                <AppBarButton Width="40"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Icon="{ui:FontIcon Glyph=ChevronRight20F745}"
                              LabelPosition="Collapsed"
                              Tapped="NextIllustrationAppBarButton_OnTapped"
                              Visibility="{x:Bind _viewModel.CalculateNextIllustrationButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
            </Grid>
            <Grid Height="30" controls:DockPanel.Dock="Bottom" />
            <Frame x:Name="IllustrationImageShowcaseFrame"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Stretch" />
        </controls:DockPanel>
    </SplitView>
</controls1:EnhancedPage>