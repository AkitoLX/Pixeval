<controls1:EnhancedPage x:Class="Pixeval.Pages.IllustrationViewer.IllustrationViewerPage"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
                        xmlns:controls1="using:Pixeval.Controls"
                        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                        xmlns:ui="using:Pixeval.Util.UI"
                        ui:NavigationHelper.BackHotKey="Escape"
                        Loaded="IllustrationViewerPage_OnLoaded"
                        PointerMoved="IllustrationViewerPage_OnPointerMoved"
                        SizeChanged="IllustrationViewerPage_OnSizeChanged"
                        mc:Ignorable="d">
    <Page.KeyboardAccelerators>
        <KeyboardAccelerator Key="Escape"
                             Invoked="ExitFullScreenKeyboardAccelerator_OnInvoked"
                             Modifiers="None" />
    </Page.KeyboardAccelerators>
    <controls1:EnhancedPage.Resources>
        <ThemeShadow x:Name="PopupShadow" />
        <ThemeShadow x:Name="SidePanelShadow" />
    </controls1:EnhancedPage.Resources>
    <SplitView x:Name="IllustrationInfoAndCommentsSplitView"
               DisplayMode="Overlay"
               IsPaneOpen="{x:Bind _viewModel.IsInfoPaneOpen, Mode=TwoWay}"
               OpenPaneLength="330"
               PaneBackground="Transparent"
               PaneClosed="IllustrationInfoAndCommentsSplitView_OnPaneClosed"
               PaneOpened="IllustrationInfoAndCommentsSplitView_OnPaneOpened">
        <SplitView.Pane>
            <Grid Width="330"
                  HorizontalAlignment="Left"
                  Background="Transparent">
                <Grid Width="320"
                      HorizontalAlignment="Left"
                      Background="{StaticResource SystemControlBackgroundChromeMediumLowBrush}"
                      Shadow="{x:Bind SidePanelShadow}"
                      Translation="0,0,40">
                    <NavigationView IsBackButtonVisible="Collapsed"
                                    IsSettingsVisible="False"
                                    PaneDisplayMode="Top"
                                    SelectionChanged="IllustrationInfoAndCommentsNavigationView_OnSelectionChanged">
                        <NavigationView.MenuItems>
                            <NavigationViewItem x:Uid="/IllustrationViewerPage/IllustrationInfoTab"
                                                IsSelected="True"
                                                Tag="{x:Bind _illustrationInfoTag}" />
                            <NavigationViewItem x:Uid="/IllustrationViewerPage/CommentsTab" Tag="{x:Bind _commentsTag}" />
                            <NavigationViewItem x:Uid="/IllustrationViewerPage/RelatedWorksTab" Tag="{x:Bind _relatedWorksTag}" />
                        </NavigationView.MenuItems>
                        <Frame x:Name="IllustrationInfoAndCommentsFrame" Width="320" />
                    </NavigationView>
                </Grid>
            </Grid>
        </SplitView.Pane>
        <Grid x:Name="IllustrationPresenterDockPanel" HorizontalAlignment="Stretch">
            <Grid x:Name="TopCommandBar"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Top">
                <Image Width="25"
                       Height="25"
                       Margin="15,0,0,0"
                       HorizontalAlignment="Left"
                       Source="/Assets/Images/logo44x44.ico" />
                <!--  ReSharper disable once Xaml.PossibleNullReferenceException  -->
                <TextBlock Margin="50,-1,0,0"
                           VerticalAlignment="Center"
                           FontSize="{StaticResource PixevalContentFontSize}"
                           Text="{x:Bind _viewModel.IllustrationViewModelInTheGridView.Illustration.Title, Mode=OneWay}" />
                <CommandBar x:Name="IllustrationViewerCommandBar"
                            Width="300"
                            Margin="0,0,20,0"
                            HorizontalAlignment="Center"
                            DefaultLabelPosition="Collapsed">
                    <AppBarToggleButton x:Uid="/IllustrationViewerPage/IllustrationInfoAndCommentsButton"
                                        Width="40"
                                        Icon="{ui:FontIcon Glyph=InfoE946}"
                                        IsChecked="{x:Bind _viewModel.IsInfoPaneOpen, Mode=TwoWay}">
                        <AppBarToggleButton.KeyboardAccelerators>
                            <KeyboardAccelerator Key="F12" />
                        </AppBarToggleButton.KeyboardAccelerators>
                    </AppBarToggleButton>
                    <AppBarButton Width="40"
                                  Command="{x:Bind _viewModel.PlayGifCommand}"
                                  Visibility="{x:Bind _viewModel.IsUgoira}" />
                    <AppBarSeparator />
                    <AppBarButton x:Uid="/IllustrationViewerPage/CopyButton"
                                  Width="40"
                                  Command="{x:Bind _viewModel.CopyCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/SaveButton"
                                  Width="40"
                                  Command="{x:Bind _viewModel.SaveCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/SaveAsButton"
                                  Width="40"
                                  Command="{x:Bind _viewModel.SaveAsCommand}" />
                    <AppBarSeparator />
                    <AppBarButton x:Uid="/IllustrationViewerPage/SetAsButton"
                                  Width="40"
                                  Icon="{ui:FontIcon Glyph=PersonalizeE771}">
                        <AppBarButton.Flyout>
                            <MenuFlyout>
                                <MenuFlyoutItem Command="{x:Bind _viewModel.SetAsBackgroundCommand}" />
                                <MenuFlyoutItem Command="{x:Bind _viewModel.SetAsLockScreenCommand}" />
                            </MenuFlyout>
                        </AppBarButton.Flyout>
                    </AppBarButton>
                    <AppBarSeparator />
                    <AppBarButton x:Uid="/IllustrationViewerPage/AddToBookmarkButton" Command="{x:Bind _viewModel.AddToBookmarkCommand}" />
                    <AppBarButton x:Name="GenerateLinkToThisPageButton"
                                  x:Uid="/IllustrationViewerPage/GenerateLinkToThisPageButton"
                                  Command="{x:Bind _viewModel.GenerateLinkCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/GenerateWebLinkButton" Command="{x:Bind _viewModel.GenerateWebLinkCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/OpenInWebBrowserButton" Command="{x:Bind _viewModel.OpenInWebBrowserCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/ShowQrCodeButton" Command="{x:Bind _viewModel.ShowQrCodeCommand}" />
                    <AppBarButton x:Uid="/IllustrationViewerPage/ShareButton" Command="{x:Bind _viewModel.ShareCommand}" />
                </CommandBar>
                <StackPanel Margin="0,0,150,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Orientation="Horizontal">
                    <CommandBar x:Name="IllustrationViewerSubCommandBar"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                DefaultLabelPosition="Collapsed">
                        <AppBarToggleButton x:Uid="/IllustrationViewerPage/FullScreenButton"
                                            Width="40"
                                            Command="{x:Bind _viewModel.FullScreenCommand}"
                                            Tapped="FullScreenButton_OnTapped" />
                        <AppBarToggleButton x:Name="RestoreResolutionToggleButton"
                                            Width="40"
                                            Command="{x:Bind _viewModel.RestoreResolutionCommand}"
                                            Tapped="RestoreResolutionToggleButton_OnTapped" />
                        <AppBarButton x:Uid="/IllustrationViewerPage/ZoomOutButton"
                                      Width="40"
                                      Command="{x:Bind _viewModel.ZoomOutCommand}" />
                        <AppBarButton x:Uid="/IllustrationViewerPage/ZoomInButton"
                                      Width="40"
                                      Command="{x:Bind _viewModel.ZoomInCommand}" />
                    </CommandBar>
                    <TextBlock x:Name="CurrentScalePercentage"
                               Width="50"
                               Margin="-5,-3,0,0"
                               VerticalAlignment="Center"
                               FontSize="{StaticResource PixevalContentFontSize}"
                               FontWeight="SemiBold"
                               HorizontalTextAlignment="Center"
                               Loaded="CurrentScalePercentage_OnLoaded"
                               TextAlignment="Center" />
                </StackPanel>
            </Grid>

            <TeachingTip x:Uid="/IllustrationViewerPage/GenerateLinkToThisPageButtonTeachingTip"
                         ActionButtonClick="GenerateLinkToThisPageButtonTeachingTip_OnActionButtonClick"
                         IsOpen="{x:Bind _viewModel.IsGenerateLinkTeachingTipOpen, Mode=OneWay}"
                         Target="{x:Bind GenerateLinkToThisPageButton}">
                <TeachingTip.HeroContent>
                    <Image Source="../../Assets/Images/illust-app-link-sample.png" />
                </TeachingTip.HeroContent>
            </TeachingTip>
            <Frame x:Name="IllustrationImageShowcaseFrame"
                   Margin="0,48,0,0"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Stretch" />

            <Grid Width="80"
                  Margin="0,48,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Stretch"
                  Background="Transparent"
                  PointerEntered="LeftPageButtonArea_OnPointerEntered"
                  PointerExited="LeftPageButtonArea_OnPointerExited">
                <Grid x:Name="PrevButtonDetector"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      Background="Transparent"
                      Opacity="0">
                    <Grid.OpacityTransition>
                        <ScalarTransition Duration="0:0:0.300" />
                    </Grid.OpacityTransition>
                    <Grid Width="30"
                          Height="100"
                          VerticalAlignment="Center"
                          Background="{StaticResource ImagePageButtonBrush}"
                          CornerRadius="5" />
                    <ContentControl Width="20"
                                    Height="100"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"
                                    Content="{ui:FontIcon Glyph=ChevronLeft20F743}"
                                    Tapped="PrevImageAppBarButton_OnTapped"
                                    Visibility="{x:Bind _viewModel.CalculatePrevImageButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
                    <ContentControl Width="20"
                                    Height="100"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"
                                    Content="{ui:FontIcon Glyph=ChevronLeft20F743}"
                                    Tapped="PrevIllustrationAppBarButton_OnTapped"
                                    Visibility="{x:Bind _viewModel.CalculatePrevIllustrationButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
                </Grid>
            </Grid>
            <Grid Width="80"
                  Margin="0,48,0,0"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Stretch"
                  Background="Transparent"
                  CornerRadius="5"
                  PointerEntered="RightPageButtonArea_OnPointerEntered"
                  PointerExited="RightPageButtonArea_OnPointerExited">
                <Grid x:Name="NextButtonDetector"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      Background="Transparent"
                      Opacity="0">
                    <Grid.OpacityTransition>
                        <ScalarTransition Duration="0:0:0.300" />
                    </Grid.OpacityTransition>
                    <Grid Width="30"
                          Height="100"
                          VerticalAlignment="Center"
                          Background="{StaticResource ImagePageButtonBrush}"
                          CornerRadius="5" />
                    <ContentControl Width="20"
                                    Height="100"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"
                                    Content="{ui:FontIcon Glyph=ChevronRight20F745}"
                                    Tapped="NextImageAppBarButton_OnTapped"
                                    Visibility="{x:Bind _viewModel.CalculateNextImageButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
                    <ContentControl Width="20"
                                    Height="100"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"
                                    Content="{ui:FontIcon Glyph=ChevronRight20F745}"
                                    Tapped="NextIllustrationAppBarButton_OnTapped"
                                    Visibility="{x:Bind _viewModel.CalculateNextIllustrationButtonVisibility(_viewModel.CurrentIndex), Mode=OneWay}" />
                </Grid>
            </Grid>
        </Grid>
    </SplitView>
</controls1:EnhancedPage>