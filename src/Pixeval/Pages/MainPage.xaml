<Page x:Class="Pixeval.Pages.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:controls="using:Pixeval.Controls"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:model="using:Pixeval.CoreApi.Model"
      xmlns:ui="using:Pixeval.Util.UI"
      xmlns:viewModel="using:Pixeval.ViewModel"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      NavigationCacheMode="Required"
      mc:Ignorable="d">

    <NavigationView x:Name="MainPageRootNavigationView"
                    d:DataContext="{d:DesignInstance viewModel:MainPageViewModel}"
                    IsSettingsVisible="False"
                    OpenPaneLength="{x:Bind _viewModel.MainPageRootNavigationViewOpenPanelLength}"
                    PaneTitle="Pixeval"
                    SelectionChanged="MainPageRootNavigationView_OnSelectionChanged">
        <NavigationView.AutoSuggestBox>
            <AutoSuggestBox x:Uid="/MainPage/MainPageAutoSuggestionBox"
                            QueryIcon="Find"
                            QuerySubmitted="KeywordAutoSuggestBox_QuerySubmitted"
                            TextChanged="KeywordAutoSuggestBox_OnTextChanged"
                            TextMemberPath="Name">
                <AutoSuggestBox.ItemTemplate>
                    <DataTemplate x:DataType="model:Tag">
                        <Grid Height="50">
                            <StackPanel VerticalAlignment="Center"
                                        Spacing="3">
                                <TextBlock FontSize="{StaticResource PixevalContentFontSize}"
                                           Text="{x:Bind Name}"
                                           TextWrapping="WrapWholeWords" />
                                <TextBlock FontSize="{StaticResource PixevalSubscriptFontSize}"
                                           Foreground="{ThemeResource PixevalTipTextForeground}"
                                           Text="{x:Bind TranslatedName}"
                                           TextWrapping="WrapWholeWords" />
                            </StackPanel>
                        </Grid>

                    </DataTemplate>
                </AutoSuggestBox.ItemTemplate>
            </AutoSuggestBox>
        </NavigationView.AutoSuggestBox>
        <NavigationView.PaneCustomContent>
            <controls:IconButton x:Uid="/MainPage/OpenSearchSettingPopupButton"
                                 Grid.Column="2"
                                 Height="30"
                                 Margin="10,0,0,0"
                                 Padding="5"
                                 VerticalAlignment="Center"
                                 Background="Transparent"
                                 CornerRadius="3"
                                 Icon="{ui:FontIcon Glyph=MapPinE707,
                                                    FontSize={StaticResource PixevalButtonIconSize}}" />
        </NavigationView.PaneCustomContent>
        <NavigationView.MenuItems>
            <NavigationViewItem x:Uid="/MainPage/RecommendationsTab"
                                Icon="{ui:FontIcon Glyph=CalendarE787}"
                                IsSelected="True"
                                Tag="{x:Bind _recommends}" />
            <NavigationViewItem x:Uid="/MainPage/RankingsTab"
                                Icon="{ui:FontIcon Glyph=MarketEAFC}"
                                Tag="{x:Bind _rankings}" />
            <NavigationViewItem x:Uid="/MainPage/BookmarksTab"
                                Icon="{ui:FontIcon Glyph=LibraryE8F1}"
                                Tag="{x:Bind _bookmarks}" />
            <NavigationViewItem x:Uid="/MainPage/FollowingsTab"
                                Icon="{ui:FontIcon Glyph=PeopleE716}" />
            <NavigationViewItem x:Uid="/MainPage/SpotlightsTab"
                                Icon="{ui:FontIcon Glyph=MapLayersE81E}" />
            <NavigationViewItem x:Uid="/MainPage/FeedsTab"
                                Icon="{ui:FontIcon Glyph=MobLocationEC43}" />
            <NavigationViewItem x:Uid="/MainPage/RecentPostsTab"
                                Icon="{ui:FontIcon Glyph=DevUpdateECC5}"
                                Tag="{x:Bind _recentPosts}" />
            <NavigationViewItem x:Uid="/MainPage/ReverseSearchTab"
                                Icon="{ui:FontIcon Glyph=SearchAndAppsE773}" />
            <NavigationViewItemHeader x:Uid="/MainPage/DownloadAndHistoriesTab" />
            <NavigationViewItem x:Uid="/MainPage/HistoriesTab"
                                Icon="{ui:FontIcon Glyph=HistoryE81C}" />
            <NavigationViewItem x:Uid="/MainPage/DownloadListTab"
                                Icon="{ui:FontIcon Glyph=CheckListE9D5}" />
        </NavigationView.MenuItems>
        <NavigationView.FooterMenuItems>
            <NavigationViewItem x:Uid="/MainPage/HelpTab"
                                Icon="{ui:FontIcon Glyph=HelpE897}" />
            <NavigationViewItem x:Uid="/MainPage/SettingsTab"
                                Icon="{ui:FontIcon Glyph=SettingE713}"
                                Tag="{x:Bind _settings}" />
        </NavigationView.FooterMenuItems>
        <Frame x:Name="MainPageRootFrame"
               Navigated="MainPageRootFrame_OnNavigated" />
    </NavigationView>
</Page>